{"ast":null,"code":"var _jsxFileName = \"/Users/caseyreid/Documents/GitHub/air-qualiti2/src/components/charts/AnxietyRiskChart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, TimeScale } from 'chart.js';\nimport { Line } from 'react-chartjs-2';\nimport 'chartjs-adapter-date-fns';\n\n// Register Chart.js components\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, TimeScale);\nconst AnxietyRiskChart = ({\n  userPreferences\n}) => {\n  _s();\n  const [data, setData] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch('http://localhost:5000/api/airqualitydata');\n        if (!response.ok) {\n          throw new Error('Failed to fetch air quality data');\n        }\n        const rawData = await response.json();\n\n        // Transform the raw data for anxiety risk chart\n        const transformedData = rawData.filter(d => d.city === userPreferences.city) // Only use data for user's city\n        .map(d => ({\n          x: new Date(d.created_at),\n          y: calculateAnxietyRisk(userPreferences.anxietyLevel, d.pm10)\n        })).sort((a, b) => a.x - b.x);\n        setData(transformedData);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchData();\n  }, [userPreferences]);\n  if (!data || data.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"risk-chart-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Anxiety Risk Chart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No data available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n  const chartData = {\n    labels: data.map(d => d.x),\n    datasets: [{\n      label: 'Anxiety Risk',\n      data: data,\n      borderColor: 'rgb(75, 192, 192)',\n      tension: 0.1,\n      fill: false\n    }]\n  };\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    scales: {\n      x: {\n        type: 'time',\n        time: {\n          unit: 'day',\n          displayFormats: {\n            day: 'MMM d'\n          }\n        },\n        title: {\n          display: true,\n          text: 'Date'\n        }\n      },\n      y: {\n        beginAtZero: true,\n        title: {\n          display: true,\n          text: 'Anxiety Risk'\n        }\n      }\n    },\n    plugins: {\n      legend: {\n        display: true,\n        position: 'top'\n      },\n      title: {\n        display: true,\n        text: 'Anxiety Risk Chart'\n      },\n      tooltip: {\n        callbacks: {\n          label: context => {\n            return `Anxiety Risk: ${context.parsed.y.toFixed(2)}`;\n          },\n          afterBody: () => [`Threshold: ${userPreferences.anxietyLevel}`, `Base Ratio: ${userPreferences.baseRatio}`, `Period: ${userPreferences.periodLabel}`]\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"risk-chart-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chart-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Anxiety Risk Chart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"age-notice\",\n        children: [\"Results applicable for \", userPreferences.ageGroup]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"period-notice\",\n        children: [\"Based on \", userPreferences.periodLabel, \" measurements\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: '300px',\n        position: 'relative'\n      },\n      children: /*#__PURE__*/_jsxDEV(Line, {\n        data: chartData,\n        options: chartOptions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        .risk-chart-container {\n          padding: 15px;\n        }\n        .chart-header {\n          margin-bottom: 15px;\n        }\n        .age-notice, .period-notice {\n          font-size: 0.9em;\n          color: #666;\n          margin: 5px 0;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this);\n};\n_s(AnxietyRiskChart, \"/iJyIuGohDU8HmiUawlNhy7FaxE=\");\n_c = AnxietyRiskChart;\nexport default AnxietyRiskChart;\nvar _c;\n$RefreshReg$(_c, \"AnxietyRiskChart\");","map":{"version":3,"names":["React","useState","useEffect","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","TimeScale","Line","jsxDEV","_jsxDEV","register","AnxietyRiskChart","userPreferences","_s","data","setData","isLoading","setIsLoading","error","setError","fetchData","response","fetch","ok","Error","rawData","json","transformedData","filter","d","city","map","x","Date","created_at","y","calculateAnxietyRisk","anxietyLevel","pm10","sort","a","b","err","message","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","chartData","labels","datasets","label","borderColor","tension","fill","chartOptions","responsive","maintainAspectRatio","scales","type","time","unit","displayFormats","day","title","display","text","beginAtZero","plugins","legend","position","tooltip","callbacks","context","parsed","toFixed","afterBody","baseRatio","periodLabel","ageGroup","style","height","options","jsx","_c","$RefreshReg$"],"sources":["/Users/caseyreid/Documents/GitHub/air-qualiti2/src/components/charts/AnxietyRiskChart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n  TimeScale\n} from 'chart.js';\nimport { Line } from 'react-chartjs-2';\nimport 'chartjs-adapter-date-fns';\n\n// Register Chart.js components\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n  TimeScale\n);\n\nconst AnxietyRiskChart = ({ userPreferences }) => {\n  const [data, setData] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch('http://localhost:5000/api/airqualitydata');\n        if (!response.ok) {\n          throw new Error('Failed to fetch air quality data');\n        }\n        const rawData = await response.json();\n        \n        // Transform the raw data for anxiety risk chart\n        const transformedData = rawData\n          .filter(d => d.city === userPreferences.city) // Only use data for user's city\n          .map(d => ({\n            x: new Date(d.created_at),\n            y: calculateAnxietyRisk(userPreferences.anxietyLevel, d.pm10)\n          }))\n          .sort((a, b) => a.x - b.x);\n\n        setData(transformedData);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [userPreferences]);\n\n  if (!data || data.length === 0) {\n    return (\n      <div className=\"risk-chart-container\">\n        <h3>Anxiety Risk Chart</h3>\n        <p>No data available</p>\n      </div>\n    );\n  }\n\n  const chartData = {\n    labels: data.map(d => d.x),\n    datasets: [{\n      label: 'Anxiety Risk',\n      data: data,\n      borderColor: 'rgb(75, 192, 192)',\n      tension: 0.1,\n      fill: false\n    }]\n  };\n\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    scales: {\n      x: {\n        type: 'time',\n        time: {\n          unit: 'day',\n          displayFormats: {\n            day: 'MMM d'\n          }\n        },\n        title: {\n          display: true,\n          text: 'Date'\n        }\n      },\n      y: {\n        beginAtZero: true,\n        title: {\n          display: true,\n          text: 'Anxiety Risk'\n        }\n      }\n    },\n    plugins: {\n      legend: {\n        display: true,\n        position: 'top'\n      },\n      title: {\n        display: true,\n        text: 'Anxiety Risk Chart'\n      },\n      tooltip: {\n        callbacks: {\n          label: (context) => {\n            return `Anxiety Risk: ${context.parsed.y.toFixed(2)}`;\n          },\n          afterBody: () => [\n            `Threshold: ${userPreferences.anxietyLevel}`,\n            `Base Ratio: ${userPreferences.baseRatio}`,\n            `Period: ${userPreferences.periodLabel}`\n          ]\n        }\n      }\n    }\n  };\n\n  return (\n    <div className=\"risk-chart-container\">\n      <div className=\"chart-header\">\n        <h3>Anxiety Risk Chart</h3>\n        <p className=\"age-notice\">Results applicable for {userPreferences.ageGroup}</p>\n        <p className=\"period-notice\">Based on {userPreferences.periodLabel} measurements</p>\n      </div>\n      <div style={{ height: '300px', position: 'relative' }}>\n        <Line data={chartData} options={chartOptions} />\n      </div>\n      <style jsx>{`\n        .risk-chart-container {\n          padding: 15px;\n        }\n        .chart-header {\n          margin-bottom: 15px;\n        }\n        .age-notice, .period-notice {\n          font-size: 0.9em;\n          color: #666;\n          margin: 5px 0;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default AnxietyRiskChart; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}