{"ast":null,"code":"var _jsxFileName = \"/Users/caseyreid/Documents/GitHub/air-qualiti2/src/components/charts/CityComparisonChart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport { supabase } from '../../supabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CityComparisonChart = ({\n  userPreferences\n}) => {\n  _s();\n  const [chartData, setChartData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // First get all unique cities from weather_data table instead of user_preferences\n        const {\n          data: citiesData,\n          error: citiesError\n        } = await supabase.from('weather_data').select('city').distinct();\n        if (citiesError) throw citiesError;\n        const cities = citiesData.map(item => item.city);\n\n        // Then fetch data for all cities\n        const {\n          data: weatherData,\n          error: dataError\n        } = await supabase.from('weather_data').select('*').in('city', cities).order('created_at', {\n          ascending: false\n        });\n        if (dataError) throw dataError;\n\n        // Process data for each city\n        const cityDatasets = cities.map((city, index) => {\n          const cityData = weatherData.filter(item => item.city === city);\n          const colors = ['rgb(0, 100, 0)', 'rgb(144, 238, 144)', 'rgb(34, 139, 34)', 'rgb(60, 179, 113)'];\n          return {\n            label: city,\n            data: cityData.map(item => ({\n              x: new Date(item.created_at),\n              y: item.pm25\n            })),\n            borderColor: colors[index % colors.length],\n            backgroundColor: colors[index % colors.length].replace('rgb', 'rgba').replace(')', ', 0.1)'),\n            borderWidth: 2,\n            tension: 0.1\n          };\n        });\n        setChartData({\n          datasets: cityDatasets\n        });\n        setError(null);\n      } catch (err) {\n        console.error('Error fetching city comparison data:', err);\n        setError('Failed to load city comparison data');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading city comparison data...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Error: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 21\n  }, this);\n  if (!chartData) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"No city comparison data available\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 26\n  }, this);\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    scales: {\n      x: {\n        type: 'time',\n        time: {\n          unit: 'day',\n          displayFormats: {\n            day: 'MMM d'\n          }\n        },\n        title: {\n          display: true,\n          text: 'Date'\n        }\n      },\n      y: {\n        beginAtZero: true,\n        title: {\n          display: true,\n          text: 'PM2.5 μg/m³'\n        }\n      }\n    },\n    plugins: {\n      legend: {\n        display: true,\n        position: 'bottom'\n      },\n      tooltip: {\n        mode: 'index',\n        intersect: false\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: '400px',\n      width: '100%'\n    },\n    children: /*#__PURE__*/_jsxDEV(Line, {\n      data: chartData,\n      options: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n};\n_s(CityComparisonChart, \"+U+KmwUQ08o91z1Gf8Cwp1b98lo=\");\n_c = CityComparisonChart;\nexport default CityComparisonChart;\nvar _c;\n$RefreshReg$(_c, \"CityComparisonChart\");","map":{"version":3,"names":["React","useState","useEffect","Line","supabase","jsxDEV","_jsxDEV","CityComparisonChart","userPreferences","_s","chartData","setChartData","isLoading","setIsLoading","error","setError","fetchData","data","citiesData","citiesError","from","select","distinct","cities","map","item","city","weatherData","dataError","in","order","ascending","cityDatasets","index","cityData","filter","colors","label","x","Date","created_at","y","pm25","borderColor","length","backgroundColor","replace","borderWidth","tension","datasets","err","console","children","fileName","_jsxFileName","lineNumber","columnNumber","options","responsive","maintainAspectRatio","scales","type","time","unit","displayFormats","day","title","display","text","beginAtZero","plugins","legend","position","tooltip","mode","intersect","style","height","width","_c","$RefreshReg$"],"sources":["/Users/caseyreid/Documents/GitHub/air-qualiti2/src/components/charts/CityComparisonChart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport { supabase } from '../../supabaseClient';\n\nconst CityComparisonChart = ({ userPreferences }) => {\n  const [chartData, setChartData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // First get all unique cities from weather_data table instead of user_preferences\n        const { data: citiesData, error: citiesError } = await supabase\n          .from('weather_data')\n          .select('city')\n          .distinct();\n\n        if (citiesError) throw citiesError;\n\n        const cities = citiesData.map(item => item.city);\n\n        // Then fetch data for all cities\n        const { data: weatherData, error: dataError } = await supabase\n          .from('weather_data')\n          .select('*')\n          .in('city', cities)\n          .order('created_at', { ascending: false });\n\n        if (dataError) throw dataError;\n\n        // Process data for each city\n        const cityDatasets = cities.map((city, index) => {\n          const cityData = weatherData.filter(item => item.city === city);\n          const colors = [\n            'rgb(0, 100, 0)',\n            'rgb(144, 238, 144)',\n            'rgb(34, 139, 34)',\n            'rgb(60, 179, 113)'\n          ];\n\n          return {\n            label: city,\n            data: cityData.map(item => ({\n              x: new Date(item.created_at),\n              y: item.pm25\n            })),\n            borderColor: colors[index % colors.length],\n            backgroundColor: colors[index % colors.length].replace('rgb', 'rgba').replace(')', ', 0.1)'),\n            borderWidth: 2,\n            tension: 0.1\n          };\n        });\n\n        setChartData({\n          datasets: cityDatasets\n        });\n        setError(null);\n      } catch (err) {\n        console.error('Error fetching city comparison data:', err);\n        setError('Failed to load city comparison data');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  if (isLoading) return <div>Loading city comparison data...</div>;\n  if (error) return <div>Error: {error}</div>;\n  if (!chartData) return <div>No city comparison data available</div>;\n\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    scales: {\n      x: {\n        type: 'time',\n        time: {\n          unit: 'day',\n          displayFormats: {\n            day: 'MMM d'\n          }\n        },\n        title: {\n          display: true,\n          text: 'Date'\n        }\n      },\n      y: {\n        beginAtZero: true,\n        title: {\n          display: true,\n          text: 'PM2.5 μg/m³'\n        }\n      }\n    },\n    plugins: {\n      legend: {\n        display: true,\n        position: 'bottom'\n      },\n      tooltip: {\n        mode: 'index',\n        intersect: false\n      }\n    }\n  };\n\n  return (\n    <div style={{ height: '400px', width: '100%' }}>\n      <Line data={chartData} options={options} />\n    </div>\n  );\n};\n\nexport default CityComparisonChart; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}